<!DOCTYPE html>
<html>
<head>
    <title>FCC: Drum Machine</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
    <link rel="stylesheet" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <!-- Load React. -->
    <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <!--
    <script src="https://unpkg.com/react@16/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js" crossorigin></script>
    -->

    <!-- For JSX -- Don't use this in production: -->
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>

</head>
<body>

<!-- Container for our JSX stuff-->
<div id="outer-container">
    <div id="my-app-container" ></div>
</div>

<!-- Some JSX stuff -->
<script type="text/babel">

class DrumPad extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
        keyLetter: this.props.letter,
        keyCode: this.props.letter.charCodeAt(0),
        name: this.props.audioName,
        displaySelector: '#'+ this.props.displayId
    };
    this.handleClick = this.handleClick.bind(this);
    this.handleKeyPress = this.handleKeyPress.bind(this);
  }
  componentDidMount() {
      document.addEventListener("keydown", this.handleKeyPress);
  }
  componentWillUnmount() {
      document.removeEventListener("keydown", this.handleKeyPress);
  }
  handleClick() {
    document.getElementById(this.state.keyLetter).play();
    $(this.state.displaySelector).html(this.state.name);
  }
  handleKeyPress(event) {
      if (event.keyCode == this.state.keyCode) {
        $("#btn-"+this.state.keyLetter).focus();
        $("#btn-"+this.state.keyLetter).click();
      }
  }
  render() {
    return (
        <button id={"btn-"+ this.state.keyLetter} className="drum-pad" onClick={this.handleClick}>
            <audio id={this.state.keyLetter} className="clip" src={this.props.audioSrc} preload="auto"></audio>
            {this.state.keyLetter}
        </button>
    );
  }
};

DrumPad.defaultProps = {
    letter: 'P',
    audioName: 'Key P Sound',
    audioSrc: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-1.mp3',
    displayId: 'display'
};

class MyApp extends React.Component {
    constructor(props) {
        super(props);
    };
    render() {
        return (
        <div id="drum-machine" className="text-center">
            <div className="drum-row">
                <DrumPad letter="Q" audioName="Chord-1" audioSrc="https://s3.amazonaws.com/freecodecamp/drums/Chord_1.mp3"/>
                <DrumPad letter="W" audioName="Chord-2" audioSrc="https://s3.amazonaws.com/freecodecamp/drums/Chord_2.mp3"/>
                <DrumPad letter="E" audioName="Chord-3" audioSrc="https://s3.amazonaws.com/freecodecamp/drums/Chord_3.mp3"/>
            </div>
            <div className="drum-row">
                <DrumPad letter="A" audioName="Heater-1" audioSrc="https://s3.amazonaws.com/freecodecamp/drums/Heater-1.mp3"/>
                <DrumPad letter="S" audioName="Heater-2" audioSrc="https://s3.amazonaws.com/freecodecamp/drums/Heater-2.mp3"/>
                <DrumPad letter="D" audioName="Heater-3" audioSrc="https://s3.amazonaws.com/freecodecamp/drums/Heater-3.mp3"/>
            </div>
            <div className="drum-row">
                <DrumPad letter="Z" audioName="Kick" audioSrc="https://s3.amazonaws.com/freecodecamp/drums/punchy_kick_1.mp3"/>
                <DrumPad letter="X" audioName="Side-Stick" audioSrc="https://s3.amazonaws.com/freecodecamp/drums/side_stick_1.mp3"/>
                <DrumPad letter="C" audioName="Heater-6" audioSrc="https://s3.amazonaws.com/freecodecamp/drums/Heater-6.mp3"/>
            </div>
            <div className="drum-row">
                <div id="display" className="container"></div>
            </div>
        </div>
        );
    }
};

ReactDOM.render(
    <MyApp />,
    document.getElementById('my-app-container')
);

</script>

<!-- Uncomment out the script below to run the FreeCodeCamp test scripts-->

<script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>



</body>
</html>
